<!DOCTYPE html>
<html lang="zh-CN" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ğŸš€ Node.jsæœåŠ¡å™¨æ€§èƒ½ä¼˜åŒ–ï¼šé«˜å¹¶å‘å¤„ç†ç­–ç•¥ - Moreyu's Blog</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/maple-mono@latest/index.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js"></script>
  <style>
        /* åŸºç¡€æ ·å¼ */
        body {
            font-family: "Maple Mono", monospace;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f7;
            color: #333;
        }

        pre {
            background: #1e1e1e;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
        }

        code {
            font-family: "Maple Mono", monospace;
        }

        h1, h2, h3 {
            color: #FF375F;
        }

        a {
            color: #0066cc;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        .meta {
            color: #666;
            font-size: .9em;
            margin-bottom: 30px;
        }

        /* è¿”å›é¦–é¡µæŒ‰é’® */
        .back-to-home {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 55, 95, .9);
            color: #fff;
            padding: 10px 20px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, .1);
            transition: all .3s ease;
            z-index: 1000;
        }

        .back-to-home:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, .2);
            text-decoration: none;
        }

        /* ç›®å½•å¯¼èˆªæ ·å¼ */
        .toc {
      position: fixed;
            right: 20px;
            top: 20px;
            width: 280px;
            max-height: 80vh;
            overflow-y: auto;
            background: rgba(34, 34, 34, 0.95);
            color: #f5f5f7;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
      z-index: 1000;
            transition: all 0.3s ease;
            scrollbar-width: thin;
            scrollbar-color: #FF375F rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 55, 95, 0.2);
        }

        .toc::-webkit-scrollbar {
            width: 6px;
        }

        .toc::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .toc::-webkit-scrollbar-thumb {
            background: #FF375F;
            border-radius: 3px;
        }

        .toc-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #FF375F;
            font-size: 1.1em;
        }

        .toc ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .toc li {
            margin: 8px 0;
            padding-left: 15px;
            border-left: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .toc li.active {
            border-left: 2px solid #FF375F;
            background: rgba(255, 55, 95, 0.1);
        }

        .toc a {
            color: #f5f5f7;
            text-decoration: none;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .toc a:hover {
            color: #FF375F;
        }

        /* å¯¼èˆªæ æŠ˜å æŒ‰é’®æ ·å¼ */
        .toc-toggle {
            position: fixed;
            right: 20px;
            top: 20px;
            background: rgba(255, 55, 95, 0.95);
            color: #ffffff;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 2px 8px rgba(255, 55, 95, 0.3);
            font-size: 1.2em;
            padding: 0;
        }

        .toc-toggle i {
            margin-right: 0;
        }

        .toc-toggle:hover {
            transform: rotate(180deg);
            background: rgba(255, 55, 95, 1);
            box-shadow: 0 4px 12px rgba(255, 55, 95, 0.5);
        }

        /* ä»£ç å¤åˆ¶æŒ‰é’®æ ·å¼ */
        .code-block {
            position: relative;
    }
    
    .copy-button {
      position: absolute;
            right: 10px;
            top: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
      border-radius: 4px;
            padding: 4px 8px;
      color: #fff;
            font-size: 12px;
      cursor: pointer;
      opacity: 0;
            transition: opacity 0.3s ease;
            font-family: "Maple Mono", monospace;
    }
    
        .code-block:hover .copy-button {
      opacity: 1;
    }
    
    .copy-button:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .copy-button.copied {
            background: #4CAF50;
        }

        /* å›¾ç‰‡é¢„è§ˆæ ·å¼ */
        .medium-zoom-overlay {
            background: rgba(0, 0, 0, 0.9) !important;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .medium-zoom-image {
            transition: transform 0.3s ease;
        }

        .medium-zoom-image:hover {
            cursor: zoom-in;
        }

        .medium-zoom-image--opened {
            cursor: zoom-out;
        }

        /* é˜…è¯»è¿›åº¦æŒ‡ç¤ºå™¨æ ·å¼ */
        .reading-progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .reading-progress-bar {
            height: 100%;
            background: #FF375F;
            width: 0;
            transition: width 0.1s ease;
        }

        /* åˆ†äº«æŒ‰é’®æ ·å¼ */
        .share-container {
            position: fixed;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .share-button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 55, 95, 0.9);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
      display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .share-button:hover {
            transform: scale(1.1);
            background: rgba(255, 55, 95, 1);
        }

        .share-button i {
            font-size: 1.2em;
        }

        /* æ·±è‰²æ¨¡å¼é€‚é… */
        @media (prefers-color-scheme: dark) {
            body {
                background: #000;
                color: #f5f5f7;
            }

            a {
                color: #2997ff;
            }

            h1, h2, h3 {
                color: #FF453A;
            }

            .toc {
                background: rgba(0, 0, 0, 0.95);
                color: #f5f5f7;
                border: 1px solid rgba(255, 69, 58, 0.2);
            }

            .toc a {
                color: #f5f5f7;
            }

            .toc a:hover {
                color: #FF453A;
    }
    
    .toc-title {
                color: #FF453A;
            }

            .toc li.active {
                border-left-color: #FF453A;
                background: rgba(255, 69, 58, 0.1);
            }

            .toc-toggle {
                background: #FF453A;
            }

            .reading-progress-container {
                background: rgba(255, 255, 255, 0.1);
            }

            .reading-progress-bar {
                background: #FF453A;
            }

            .share-button {
                background: rgba(255, 69, 58, 0.9);
            }

            .share-button:hover {
                background: rgba(255, 69, 58, 1);
            }
        }

        /* å“åº”å¼å¸ƒå±€ */
        @media (max-width: 1200px) {
            .toc {
                display: none;
                right: -300px;
            }

            .toc.show {
                display: block;
                right: 20px;
            }

            .toc-toggle {
      display: block;
            }
        }

        @media (min-width: 1201px) {
            .toc {
                display: block;
            }

            .toc-toggle {
                display: none;
            }
    }

    @media (max-width: 768px) {
            body {
                padding: 15px;
                padding-bottom: 80px;
            }

            pre {
                padding: 10px;
                font-size: 14px;
            }

            .back-to-home {
                bottom: 20px;
                right: 20px;
            }

            .copy-button {
                opacity: 1;
                top: 5px;
                right: 5px;
                padding: 3px 6px;
            }

            .share-container {
                position: fixed;
                left: 20px;
                top: auto;
                bottom: 20px;
                transform: none;
                flex-direction: row;
                gap: 10px;
            }
        }

        /* é˜…è¯»è¿›åº¦æŒ‡ç¤ºå™¨åŠ¨ç”» */
        @keyframes progress-glow {
            0% { box-shadow: 0 0 5px var(--theme-color); }
            50% { box-shadow: 0 0 15px var(--theme-color); }
            100% { box-shadow: 0 0 5px var(--theme-color); }
        }

        .reading-progress {
            animation: progress-glow 2s ease-in-out infinite;
        }

        /* å›¾ç‰‡æ‚¬åœæ•ˆæœ */
        img {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        img:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* ä»£ç å—ä¼˜åŒ– */
        pre {
            position: relative;
            border-radius: 8px;
            transition: all 0.3s ease;
            background: linear-gradient(145deg, #1e1e1e, #2a2a2a);
            box-shadow: inset 0 2px 4px rgba(255,255,255,0.1);
        }

        pre::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.05), transparent);
            background-size: 200% 200%;
            animation: shimmer 3s infinite;
            pointer-events: none;
            border-radius: 8px;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        .copy-button {
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        pre:hover .copy-button {
            opacity: 1;
        }

        /* å¯¼èˆªæ ä¼˜åŒ– */
        .toc {
            transition: all 0.3s ease;
            opacity: 0.85;
        }

        .toc:hover {
            opacity: 1;
            transform: translateX(-5px);
        }

        .toc-toggle {
            position: fixed;
            right: 20px;
            top: 20px;
            background: var(--theme-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .toc-toggle:hover {
            transform: rotate(180deg);
        }

        /* å“åº”å¼å¸ƒå±€ */
        @media (min-width: 1201px) {
            .toc {
                transform: translateX(100%);
                opacity: 0;
            }

            .toc.show {
                transform: translateX(0);
                opacity: 0.85;
            }

            .toc-toggle {
                display: block;
      }
    }

    @media (max-width: 1200px) {
      .toc {
                transform: translateX(100%);
                opacity: 0;
            }

            .toc.show {
                transform: translateX(0);
                opacity: 0.85;
            }

            .toc-toggle {
                display: block;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 15px;
                padding-bottom: 80px;
            }
            
            .share-container {
                position: fixed;
                left: 20px;
                top: auto;
                bottom: 20px;
                transform: none;
                flex-direction: row;
                gap: 10px;
            }

            .back-to-home {
                bottom: 20px;
                right: 20px;
            }
        }

        /* æ–‡ç« å†…å®¹åŠ¨ç”» */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1, h2, h3, p {
            animation: fadeInUp 0.5s ease-out forwards;
            opacity: 0;
        }

        h1 { animation-delay: 0.1s; }
        h2 { animation-delay: 0.2s; }
        h3 { animation-delay: 0.3s; }
        p { animation-delay: 0.4s; }

        /* ä»£ç é«˜äº®åŠ¨ç”» */
        code {
            position: relative;
            overflow: hidden;
        }

        code::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.2),
                transparent
            );
            animation: code-shine 3s infinite;
        }

        @keyframes code-shine {
            0% { left: -100%; }
            20% { left: 100%; }
            100% { left: 100%; }
        }

        /* æ ‡é¢˜è£…é¥° */
        h2 {
            position: relative;
            padding-left: 15px;
            margin-top: 2em;
        }

        h2::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: linear-gradient(to bottom, #FF375F, rgba(255,55,95,0.5));
            border-radius: 2px;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(to right, #FF375F, transparent);
        }

        /* æ·±è‰²æ¨¡å¼é€‚é… */
        @media (prefers-color-scheme: dark) {
            h2::before {
                background: linear-gradient(to bottom, #FF453A, rgba(255,69,58,0.5));
            }

            h2::after {
                background: linear-gradient(to right, #FF453A, transparent);
            }
        }

        /* å¼•ç”¨æ ·å¼ */
        blockquote {
            margin: 20px 0;
            padding: 20px;
            background: rgba(255,55,95,0.1);
            border-left: 4px solid #FF375F;
            border-radius: 0 8px 8px 0;
            position: relative;
            overflow: hidden;
        }

        blockquote::before {
            content: '"';
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 4em;
            color: rgba(255,55,95,0.2);
            font-family: serif;
            line-height: 1;
        }

        blockquote p {
            margin: 0;
            position: relative;
            z-index: 1;
        }

        /* åˆ—è¡¨æ ·å¼ä¼˜åŒ– */
        ul:not(.toc ul) {
            list-style: none;
            padding-left: 1.5em;
        }

        ul:not(.toc ul) li {
            position: relative;
            margin: 0.5em 0;
        }

        ul:not(.toc ul) li::before {
            content: 'â–¹';
            position: absolute;
            left: -1.5em;
            color: #FF375F;
            font-size: 0.8em;
            transition: transform 0.2s ease;
        }

        ul:not(.toc ul) li:hover::before {
            transform: translateX(5px);
        }

        /* æ·±è‰²æ¨¡å¼é€‚é… */
        @media (prefers-color-scheme: dark) {
            blockquote {
                background: rgba(255,69,58,0.1);
                border-left-color: #FF453A;
            }

            blockquote::before {
                color: rgba(255,69,58,0.2);
            }

            ul:not(.toc ul) li::before {
                color: #FF453A;
      }
    }
  </style>
</head>
<body>
    <div class="reading-progress-container">
    <div class="reading-progress-bar"></div>
  </div>

    <div class="share-container">
        <button class="share-button" title="åˆ†äº«åˆ°å¾®ä¿¡" onclick="shareToWeChat()">
            <i class="fab fa-weixin"></i>
        </button>
        <button class="share-button" title="åˆ†äº«åˆ°å¾®åš" onclick="shareToWeibo()">
            <i class="fab fa-weibo"></i>
        </button>
        <button class="share-button" title="å¤åˆ¶é“¾æ¥" onclick="copyLink()">
            <i class="fas fa-link"></i>
        </button>
    </div>

    <button class="toc-toggle" title="æ˜¾ç¤º/éšè—ç›®å½•">
        <i class="fas fa-bars"></i>
    </button>

  <aside class="toc">
    <div class="toc-title">ğŸ“š ç›®å½•</div>
    <ul>
      <li><a href="#å‰è¨€-ğŸ“">å‰è¨€ ğŸ“</a></li>
      <li><a href="#ç¯å¢ƒå‡†å¤‡-ğŸ› ï¸">ç¯å¢ƒå‡†å¤‡ ğŸ› ï¸</a></li>
      <li><a href="#éƒ¨ç½²é’é¾™é¢æ¿-ğŸš€">éƒ¨ç½²é’é¾™é¢æ¿ ğŸš€</a></li>
      <li><a href="#é…ç½®é’é¾™é¢æ¿-âš™ï¸">é…ç½®é’é¾™é¢æ¿ âš™ï¸</a></li>
      <li><a href="#å®ç”¨è„šæœ¬ç¤ºä¾‹-ğŸ“œ">å®ç”¨è„šæœ¬ç¤ºä¾‹ ğŸ“œ</a></li>
      <li><a href="#æ€§èƒ½ä¼˜åŒ–å»ºè®®-ğŸš€">æ€§èƒ½ä¼˜åŒ–å»ºè®® ğŸš€</a></li>
      <li><a href="#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ-ğŸ’¡">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ ğŸ’¡</a></li>
      <li><a href="#åç»­è®¡åˆ’-ğŸ¯">åç»­è®¡åˆ’ ğŸ¯</a></li>
    </ul>
  </aside>

    <main class="post-content">
        <h1>ğŸš€ Node.jsæœåŠ¡å™¨æ€§èƒ½ä¼˜åŒ–ï¼šé«˜å¹¶å‘å¤„ç†ç­–ç•¥</h1>
        <div class="meta">å‘å¸ƒæ—¶é—´ï¼š2024-07-12 | åˆ†ç±»ï¼šåç«¯å¼€å‘, Node.js, æ€§èƒ½ä¼˜åŒ–</div>
        <h2 id="å‰è¨€-ğŸ“">å‰è¨€ ğŸ“</h2>
        <p>Node.jsæœåŠ¡å™¨åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§å’Œæœ€ä½³å®è·µã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»ç›¸å…³æŠ€æœ¯æ¦‚å¿µã€å®è·µç»éªŒå’Œæœ€ä½³å®è·µã€‚</p>
        <h2 id="ç¯å¢ƒå‡†å¤‡-ğŸ› ï¸">ç¯å¢ƒå‡†å¤‡ ğŸ› ï¸</h2>
        <h3>1. å®‰è£… Homebrew</h3>
        <pre><code class="bash">/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"</code></pre>
        <p>å®‰è£…å®Œæˆåï¼Œç¡®ä¿å°† Homebrew æ·»åŠ åˆ° PATH ä¸­ã€‚å¯¹äº Apple Silicon Macï¼Œé€šå¸¸éœ€è¦æ·»åŠ ä»¥ä¸‹è·¯å¾„ï¼š</p>
        <pre><code class="bash">echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> ~/.zprofile
eval "$(/opt/homebrew/bin/brew shellenv)"</code></pre>
        <h3>2. å®‰è£… Docker</h3>
        <pre><code class="bash">brew install --cask docker</code></pre>
        <p>å®‰è£…å®Œæˆåï¼Œå¯åŠ¨ Docker Desktop å¹¶ç­‰å¾…å…¶åˆå§‹åŒ–å®Œæˆã€‚</p>
        <h3>3. åˆ›å»ºå·¥ä½œç›®å½•</h3>
        <pre><code class="bash">mkdir -p ~/docker/qinglong
cd ~/docker/qinglong</code></pre>
        <h2 id="éƒ¨ç½²é’é¾™é¢æ¿-ğŸš€">éƒ¨ç½²é’é¾™é¢æ¿ ğŸš€</h2>
        <h3>1. åˆ›å»º docker-compose.yml</h3>
        <pre><code class="yaml">version: '3'
services:
  qinglong:
    image: whyour/qinglong:latest
    container_name: qinglong
    restart: unless-stopped
    ports:
      - "5700:5700"
    volumes:
      - ./data:/ql/data
    environment:
      - ENABLE_HANGUP=true
      - ENABLE_WEB_PANEL=true
      - TZ=Asia/Shanghai</code></pre>
        <h3>2. å¯åŠ¨æœåŠ¡</h3>
        <pre><code class="bash">docker-compose up -d</code></pre>
        <p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥å®¹å™¨çŠ¶æ€ï¼š</p>
        <pre><code class="bash">docker ps | grep qinglong</code></pre>
        <h2 id="é…ç½®é’é¾™é¢æ¿-âš™ï¸">é…ç½®é’é¾™é¢æ¿ âš™ï¸</h2>
        <h3>1. åˆå§‹åŒ–é…ç½®</h3>
        <p>è®¿é—® <code>http://localhost:5700</code> è¿›è¡Œåˆå§‹åŒ–é…ç½®ï¼š</p>
        <ul>
            <li>è®¾ç½®ç®¡ç†å‘˜è´¦å·å¯†ç </li>
            <li>é…ç½®é€šçŸ¥æ–¹å¼ï¼ˆæ¨èä½¿ç”¨ Bark æˆ– Telegramï¼‰</li>
            <li>æ·»åŠ å®šæ—¶ä»»åŠ¡</li>
        </ul>
        <h3>2. é…ç½®ä¾èµ–ç®¡ç†</h3>
        <p>åœ¨"ä¾èµ–ç®¡ç†"é¡µé¢å®‰è£…ä»¥ä¸‹åŸºç¡€ä¾èµ–ï¼š</p>
        <pre><code class="bash"># NodeJS ä¾èµ–
npm install -g typescript ts-node

# Python ä¾èµ–
pip3 install requests
pip3 install PyExecJS</code></pre>
        <h2 id="å®ç”¨è„šæœ¬ç¤ºä¾‹-ğŸ“œ">å®ç”¨è„šæœ¬ç¤ºä¾‹ ğŸ“œ</h2>
        <h3>1. ç³»ç»Ÿç›‘æ§è„šæœ¬</h3>
        <pre><code class="javascript">// monitor.js
const os = require('os');
const sendNotify = require('./sendNotify');

async function monitor() {
    const cpuUsage = os.loadavg()[0];
    const totalMem = os.totalmem();
    const freeMem = os.freemem();
    const usedMemPercentage = ((totalMem - freeMem) / totalMem * 100).toFixed(2);

    const message = [
        `ç³»ç»ŸçŠ¶æ€æŠ¥å‘Š`,
        `CPU è´Ÿè½½: ${cpuUsage.toFixed(2)}`,
        `å†…å­˜ä½¿ç”¨: ${usedMemPercentage}%`,
        `ç©ºé—²å†…å­˜: ${(freeMem / 1024 / 1024 / 1024).toFixed(2)}GB`,
        `è¿è¡Œæ—¶é—´: ${(os.uptime() / 3600).toFixed(1)}å°æ—¶`
    ].join('\n');

    if (cpuUsage > 2 || usedMemPercentage > 80) {
        await sendNotify.sendNotify('ç³»ç»Ÿèµ„æºè­¦å‘Š âš ï¸', message);
    }
}

monitor();</code></pre>
        <h3>2. è‡ªåŠ¨å¤‡ä»½è„šæœ¬</h3>
        <pre><code class="python"># backup.py
import os
import time
from datetime import datetime
import shutil

def backup():
    # å¤‡ä»½ç›®å½•
    backup_dir = "/ql/data/backup"
    if not os.path.exists(backup_dir):
        os.makedirs(backup_dir)
    
    # åˆ›å»ºå¤‡ä»½æ–‡ä»¶å
    timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
    backup_file = f"{backup_dir}/ql_backup_{timestamp}.tar.gz"
    
    # éœ€è¦å¤‡ä»½çš„ç›®å½•
    dirs_to_backup = [
        "/ql/data/config",
        "/ql/data/scripts",
        "/ql/data/db"
    ]
    
    # åˆ›å»ºå¤‡ä»½
    backup_cmd = f"tar -czf {backup_file} {' '.join(dirs_to_backup)}"
    os.system(backup_cmd)
    
    # æ¸…ç†æ—§å¤‡ä»½ï¼ˆä¿ç•™æœ€è¿‘7å¤©ï¼‰
    files = [f for f in os.listdir(backup_dir) if f.endswith('.tar.gz')]
    files.sort()
    while len(files) > 7:
        os.remove(os.path.join(backup_dir, files[0]))
        files = files[1:]
    
    # è®¡ç®—å¤‡ä»½å¤§å°
    backup_size = os.path.getsize(backup_file) / 1024 / 1024  # MB
    print(f"å¤‡ä»½å®Œæˆ: {backup_file} ({backup_size:.2f}MB)")

if __name__ == "__main__":
    backup()</code></pre>
        <h2 id="æ€§èƒ½ä¼˜åŒ–å»ºè®®-ğŸš€">æ€§èƒ½ä¼˜åŒ–å»ºè®® ğŸš€</h2>
        <ul>
            <li>åˆç†è®¾ç½®å®šæ—¶ä»»åŠ¡é—´éš”ï¼Œé¿å…ä»»åŠ¡é‡å æ‰§è¡Œ</li>
            <li>å®šæœŸæ¸…ç†æ—¥å¿—æ–‡ä»¶å’Œä¸´æ—¶æ–‡ä»¶</li>
            <li>ä½¿ç”¨ <code>cron</code> è¡¨è¾¾å¼ä¼˜åŒ–ä»»åŠ¡æ‰§è¡Œæ—¶é—´</li>
            <li>å¯¹äºèµ„æºå¯†é›†å‹ä»»åŠ¡ï¼Œå»ºè®®åœ¨ä½å³°æœŸæ‰§è¡Œ</li>
        </ul>
        <h2 id="å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ-ğŸ’¡">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ ğŸ’¡</h2>
        <h3>1. å®¹å™¨æ— æ³•å¯åŠ¨</h3>
        <ul>
            <li>æ£€æŸ¥ç«¯å£ 5700 æ˜¯å¦è¢«å ç”¨ï¼š<code>lsof -i:5700</code></li>
            <li>æ£€æŸ¥ç›®å½•æƒé™ï¼š<code>chmod -R 777 ~/docker/qinglong/data</code></li>
            <li>æŸ¥çœ‹ Docker æ—¥å¿—ï¼š<code>docker logs qinglong</code></li>
        </ul>
        <h3>2. è„šæœ¬è¿è¡Œå¤±è´¥</h3>
        <ul>
            <li>æ£€æŸ¥ä¾èµ–æ˜¯å¦å®‰è£…å®Œæ•´</li>
            <li>æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼š<code>docker exec -it qinglong cat /ql/log/[è„šæœ¬åç§°].log</code></li>
            <li>ç¡®è®¤ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®</li>
        </ul>
        <h2 id="åç»­è®¡åˆ’-ğŸ¯">åç»­è®¡åˆ’ ğŸ¯</h2>
        <p>è¿™æ˜¯å®¶ç”¨æœåŠ¡å™¨ç³»åˆ—çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œåç»­æˆ‘ä»¬å°†ç»§ç»­æ¢ç´¢æ›´å¤šæœ‰è¶£çš„åº”ç”¨åœºæ™¯ï¼š</p>
        <ul>
            <li>æ­å»º Homebridge å®ç°æ™ºèƒ½å®¶å±…é›†æˆ</li>
            <li>éƒ¨ç½² Nginx åå‘ä»£ç†å®ç°å¤–ç½‘è®¿é—®</li>
            <li>ä½¿ç”¨ Docker Compose ç®¡ç†å¤šä¸ªæœåŠ¡</li>
            <li>é…ç½® SSL è¯ä¹¦å®ç°å®‰å…¨è®¿é—®</li>
        </ul>
        <a href="/" class="back-to-home">è¿”å›é¦–é¡µ ğŸ </a>
    </main>

    <script>
        // ä»£ç é«˜äº®
        hljs.highlightAll();

        // ç›®å½•å¯¼èˆªåŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const toc = document.querySelector('.toc');
            const tocToggle = document.querySelector('.toc-toggle');
            const headings = document.querySelectorAll('h2');
            const tocLinks = document.querySelectorAll('.toc a');
            let isVisible = false;

            // åˆ‡æ¢ç›®å½•æ˜¾ç¤º
            tocToggle.addEventListener('click', () => {
                isVisible = !isVisible;
                toc.classList.toggle('show');
                tocToggle.style.transform = isVisible ? 'rotate(180deg)' : 'rotate(0deg)';
            });

            // ç‚¹å‡»ç›®å½•é¡¹æ—¶æ»šåŠ¨åˆ°å¯¹åº”ä½ç½®
            tocLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href').slice(1);
                    const targetElement = document.getElementById(targetId);
                    if (targetElement) {
                        const offset = 80; // è®¾ç½®åç§»é‡ï¼Œé¿å…æ ‡é¢˜è¢«é¡¶éƒ¨é®æŒ¡
                        const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset - offset;
                        
                        window.scrollTo({
                            top: targetPosition,
                            behavior: 'smooth'
                        });

                        // æ›´æ–°å½“å‰æ´»åŠ¨é¡¹
                        tocLinks.forEach(l => l.parentElement.classList.remove('active'));
                        link.parentElement.classList.add('active');

                        // åœ¨ç§»åŠ¨ç«¯ç‚¹å‡»åéšè—ç›®å½•
                        if (window.innerWidth <= 1200) {
                            isVisible = false;
                            toc.classList.remove('show');
                            tocToggle.style.transform = 'rotate(0deg)';
                        }
                    }
                });
            });

            // æ»šåŠ¨æ—¶é«˜äº®å½“å‰æ ‡é¢˜
            let lastActiveLink = null;
            window.addEventListener('scroll', () => {
                const scrollPosition = window.scrollY;
                
                // æ‰¾åˆ°å½“å‰å¯è§çš„æ ‡é¢˜
                let currentHeading = null;
                headings.forEach(heading => {
                    if (heading.offsetTop <= scrollPosition + 100) {
                        currentHeading = heading;
                    }
                });
                
                if (currentHeading) {
                    const currentId = currentHeading.id;
                    const currentLink = document.querySelector(`.toc a[href="#${currentId}"]`);
                    
                    if (lastActiveLink && lastActiveLink !== currentLink) {
                        lastActiveLink.parentElement.classList.remove('active');
                    }
                    
                    if (currentLink && lastActiveLink !== currentLink) {
                        currentLink.parentElement.classList.add('active');
                        lastActiveLink = currentLink;
                    }
                }
            });
        });

        // ä»£ç å¤åˆ¶åŠŸèƒ½
        document.querySelectorAll('pre').forEach(block => {
            const button = block.querySelector('.copy-button');
            if (button) {
      button.addEventListener('click', async () => {
                    const code = block.querySelector('code').innerText;
        await navigator.clipboard.writeText(code);
                    
                    const originalText = button.innerHTML;
                    button.innerHTML = 'âœ“ å·²å¤åˆ¶';
                    button.style.background = '#4CAF50';
                    
        setTimeout(() => {
                        button.innerHTML = originalText;
                        button.style.background = '';
        }, 2000);
      });
            }
        });

        // å›¾ç‰‡é¢„è§ˆåŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            mediumZoom('img:not(.no-zoom)', {
                margin: 24,
                background: 'rgba(0, 0, 0, 0.9)',
                scrollOffset: 40,
                container: {
                    top: 80,
                    bottom: 80,
                    right: 80,
                    left: 80,
                }
            });
        });

        // é˜…è¯»è¿›åº¦æŒ‡ç¤ºå™¨åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const progressBar = document.querySelector('.reading-progress-bar');
            const content = document.querySelector('body');
            
            function updateProgress() {
                const scrollPosition = window.scrollY;
                const scrollHeight = content.scrollHeight - window.innerHeight;
                const progress = (scrollPosition / scrollHeight) * 100;
                progressBar.style.width = `${Math.min(100, Math.max(0, progress))}%`;
            }
            
            window.addEventListener('scroll', updateProgress);
            window.addEventListener('resize', updateProgress);
            updateProgress();
        });

        // åˆ†äº«åŠŸèƒ½
        function shareToWeChat() {
            alert('è¯·ä½¿ç”¨å¾®ä¿¡æ‰«æäºŒç»´ç åˆ†äº«');
        }

        function shareToWeibo() {
            const title = document.title;
            const url = window.location.href;
            const weiboUrl = `http://service.weibo.com/share/share.php?url=${encodeURIComponent(url)}&title=${encodeURIComponent(title)}`;
            window.open(weiboUrl, '_blank');
        }

        async function copyLink() {
            try {
                await navigator.clipboard.writeText(window.location.href);
                alert('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            } catch (err) {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥');
            }
        }

        // æ›´æ–°å¯¼èˆªæ æ˜¾ç¤ºé€»è¾‘
        document.addEventListener('DOMContentLoaded', function() {
            const toc = document.querySelector('.toc');
            const tocToggle = document.querySelector('.toc-toggle');
            let isVisible = false;

            // æ·»åŠ ç‚¹å‡»äº‹ä»¶
            tocToggle.addEventListener('click', function() {
                isVisible = !isVisible;
                toc.classList.toggle('show', isVisible);
                tocToggle.style.transform = isVisible ? 'rotate(180deg)' : 'rotate(0deg)';
            });

            // æ·»åŠ æ»šåŠ¨ç›‘å¬
            let lastScrollTop = 0;
            window.addEventListener('scroll', function() {
                const st = window.pageYOffset || document.documentElement.scrollTop;
                if (st > lastScrollTop && isVisible) {
                    // å‘ä¸‹æ»šåŠ¨æ—¶è‡ªåŠ¨éšè—
                    isVisible = false;
                    toc.classList.remove('show');
                    tocToggle.style.transform = 'rotate(0deg)';
                }
                lastScrollTop = st <= 0 ? 0 : st;
            });
    });
  </script>
</body>
</html> 