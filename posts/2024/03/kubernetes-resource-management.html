<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>深入理解 Kubernetes 资源管理与调度策略 - Moreyu's Blog ✨</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/maple-mono@latest/index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="reading-progress"></div>
    
    <a href="/" class="back-home">
        <i class="fas fa-home"></i> 返回首页
    </a>

    <div class="share-menu">
        <button class="share-button" onclick="shareToTwitter()">
            <i class="fab fa-twitter"></i>
        </button>
        <button class="share-button" onclick="shareToFacebook()">
            <i class="fab fa-facebook"></i>
        </button>
        <button class="share-button" onclick="copyLink()">
            <i class="fas fa-link"></i>
        </button>
    </div>

    <nav class="toc">
        <div class="toc-title">目录</div>
        <ul>
            <li><a href="#introduction">引言</a></li>
            <li><a href="#resource-types">Kubernetes 资源类型</a></li>
            <li><a href="#requests-limits">资源请求与限制</a></li>
            <li><a href="#scheduling">调度策略详解</a></li>
            <li><a href="#best-practices">最佳实践</a></li>
            <li><a href="#summary">总结</a></li>
        </ul>
    </nav>

    <article class="post-content">
        <h1>深入理解 Kubernetes 资源管理与调度策略</h1>
        
        <div class="post-meta">
            <span><i class="far fa-calendar"></i> 2024-03-15</span>
            <span><i class="far fa-clock"></i> 20 分钟阅读</span>
            <span><i class="fas fa-tag"></i> 云原生</span>
        </div>

        <h2 id="introduction">引言</h2>
        <p>在云原生时代，Kubernetes 已经成为容器编排的事实标准。高效的资源管理和合理的调度策略是构建可靠、高性能容器化应用的基础。本文将深入探讨 Kubernetes 的资源管理机制和调度策略。</p>

        <h2 id="resource-types">Kubernetes 资源类型</h2>
        <div class="card-3d">
            <h3>计算资源</h3>
            <ul>
                <li>CPU</li>
                <li>内存</li>
                <li>临时存储</li>
                <li>扩展资源（如 GPU）</li>
            </ul>
            <pre><code class="yaml">resources:
  requests:
    memory: "64Mi"
    cpu: "250m"
  limits:
    memory: "128Mi"
    cpu: "500m"</code></pre>
        </div>

        <h2 id="requests-limits">资源请求与限制</h2>
        <div class="card-3d">
            <h3>资源请求（Requests）</h3>
            <p>Pod 调度时的最小资源保证：</p>
            <pre><code class="yaml">spec:
  containers:
  - name: app
    resources:
      requests:
        memory: "64Mi"
        cpu: "250m"</code></pre>

            <h3>资源限制（Limits）</h3>
            <p>容器可以使用的最大资源量：</p>
            <pre><code class="yaml">spec:
  containers:
  - name: app
    resources:
      limits:
        memory: "128Mi"
        cpu: "500m"</code></pre>
        </div>

        <h2 id="scheduling">调度策略详解</h2>
        <div class="card-3d">
            <h3>节点亲和性（Node Affinity）</h3>
            <pre><code class="yaml">affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
      - matchExpressions:
        - key: kubernetes.io/e2e-az-name
          operator: In
          values:
          - e2e-az1
          - e2e-az2</code></pre>

            <h3>Pod 亲和性（Pod Affinity）</h3>
            <pre><code class="yaml">affinity:
  podAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
    - labelSelector:
        matchExpressions:
        - key: security
          operator: In
          values:
          - S1</code></pre>
        </div>

        <h2 id="best-practices">最佳实践</h2>
        <div class="card-3d">
            <p>在生产环境中，建议遵循以下最佳实践：</p>
            <ul>
                <li>始终设置资源请求和限制</li>
                <li>使用命名空间进行资源隔离</li>
                <li>实施资源配额管理</li>
                <li>合理使用节点亲和性</li>
                <li>定期监控资源使用情况</li>
            </ul>
        </div>

        <h2 id="summary">总结</h2>
        <p>合理的资源管理和调度策略是 Kubernetes 集群稳定运行的基石。通过本文的介绍，我们了解了如何通过资源请求、限制和各种调度策略来优化容器化应用的部署和运行。在实际应用中，需要根据具体场景和需求来制定合适的资源管理策略。</p>

        <div class="post-tags">
            <span class="tag">Kubernetes 🚢</span>
            <span class="tag">云原生 ☁️</span>
            <span class="tag">容器编排 🎯</span>
            <span class="tag">资源管理 ⚙️</span>
        </div>
    </article>

    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js"></script>
    <script>
        // 代码高亮
        hljs.highlightAll();
        
        // 图片放大
        mediumZoom('[data-zoomable]');

        // 阅读进度条
        window.addEventListener('scroll', () => {
            const docHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (window.scrollY / docHeight) * 100;
            document.querySelector('.reading-progress').style.setProperty('--progress', `${scrolled}%`);
        });

        // 分享功能
        function shareToTwitter() {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent(document.title);
            window.open(`https://twitter.com/intent/tweet?url=${url}&text=${text}`);
        }

        function shareToFacebook() {
            const url = encodeURIComponent(window.location.href);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`);
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href)
                .then(() => alert('链接已复制到剪贴板！'));
        }
    </script>
</body>
</html> 